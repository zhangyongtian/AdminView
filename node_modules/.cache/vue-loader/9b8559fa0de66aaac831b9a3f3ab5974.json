{"remainingRequest":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\biyesheji\\AdminView\\adminvue\\src\\components\\CommentAdmin\\CommentAdmin.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\biyesheji\\AdminView\\adminvue\\src\\components\\CommentAdmin\\CommentAdmin.vue","mtime":1608196421645},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi51c2VyLWNvbnRlbnR7Cgl0ZXh0LWFsaWduOiBsZWZ0Owp9Cg=="},{"version":3,"sources":["CommentAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8OA;AACA;AACA","file":"CommentAdmin.vue","sourceRoot":"src/components/CommentAdmin","sourcesContent":["<template>\r\n  <div class=\"user-content\">\r\n\t  <el-card class=\"box-card\">\r\n\t    <div slot=\"header\" class=\"clearfix\">\r\n\t      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t        <el-breadcrumb-item :to=\"{ path: '/admin' }\">首页</el-breadcrumb-item>\r\n\t        <el-breadcrumb-item>评论管理</el-breadcrumb-item>\r\n\t      </el-breadcrumb>\r\n\t    </div>\r\n\t    <!-- //下面是显示的评论内容 -->\r\n\t\t\t<el-tabs type=\"border-card\" @tab-click=\"handleClick\">\r\n\t\t\t\t\t<el-tab-pane label=\"父评论管理\">\r\n\t\t\t\t\t\t<div v-for=\"(item,index) in parentcomments\" style=\"margin-top: 5px;\">\r\n\t\t\t\t\t\t\t\t<comment :comment=\"item\" :commentItem=\"index\" @deleteCommentByItem=\"deleteCommentByItem\"></comment>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<!-- 下面是分页 -->\r\n\t\t\t\t\t\t\t<el-pagination\r\n\t\t\t\t\t\t  @size-change=\"handleSizeChange\"\r\n\t\t\t\t\t\t  @current-change=\"handleCurrentChange\"\r\n\t\t\t\t\t\t  :current-page=\"currentPage4\"\r\n\t\t\t\t\t\t  :page-sizes=\"pagesizes\"\r\n\t\t\t\t\t\t  :page-size=\"pagesize\"\r\n\t\t\t\t\t\t  layout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t\t  :total=\"totalsize\">\r\n\t\t\t\t\t\t</el-pagination>\r\n\t\t\t\t\t</el-tab-pane>\r\n\t\t\t\t\t<el-tab-pane label=\"子评论管理\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<div v-for=\"(item,index) in soncomments.content\" style=\"margin-top: 5px;\">\r\n\t\t\t\t\t\t\t\t\t<comment :comment=\"item\" :commentItem=\"index\" @deleteCommentByItem=\"deleteCommentByItem\"></comment>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<!-- 下面是分页 -->\r\n\t\t\t\t\t\t\t\t<el-pagination\r\n\t\t\t\t\t\t\t  @size-change=\"sonhandleSizeChange\"\r\n\t\t\t\t\t\t\t  @current-change=\"sonhandleCurrentChange\"\r\n\t\t\t\t\t\t\t  :current-page=\"soncomments.pageNum\"\r\n\t\t\t\t\t\t\t  :page-sizes=\"pagesizes\"\r\n\t\t\t\t\t\t\t  :page-size=\"soncomments.pageSize\"\r\n\t\t\t\t\t\t\t  layout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t\t\t  :total=\"soncomments.totalSize\">\r\n\t\t\t\t\t\t\t</el-pagination>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</el-tab-pane>\r\n\t\t\t</el-tabs>\r\n\t\t\t<!-- 下面定义一个模态框确认是否删除 -->\r\n\t\t\t<el-dialog\r\n\t\t\ttitle=\"提示\"\r\n\t\t\t:visible.sync=\"dialogVisible\"\r\n\t\t\twidth=\"30%\"\r\n\t\t\t>\r\n\t\t\t<span>删除一条父评论会删除这个评论下面的所有的子评论确认删除吗?</span>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"deletecomment\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t\r\n\t\t<!-- 下面是一个子模态 -->\r\n\t\t\t<el-dialog\r\n\t\t\ttitle=\"提示\"\r\n\t\t\t:visible.sync=\"sondialogVisible\"\r\n\t\t\twidth=\"30%\"\r\n\t\t\t>\r\n\t\t\t<span>确定要删除这个评论吗?</span>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"sondialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"sondeletecomment\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t  </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\timport {parenetpagecomment} from \"@/util/requestnetwork/parenetpagecomment\"\r\n\timport {deleteparentcomment} from \"@/util/requestnetwork/parenetpagecomment\"\r\n\t\r\n\timport {soncommentRequest} from \"@/util/requestnetwork/soncommentRequest\"\r\n\timport {deletesoncomment} from \"@/util/requestnetwork/soncommentRequest\"\r\n\t\r\n\timport comment from \"@/components/CommentAdmin/comment\"\r\n  export default {\r\n\t name:\"useradmin\",\r\n\t components: {\r\n\t \tcomment\r\n\t },\r\n\t methods: {\r\n\t\t // 下面的两个方法就说分别的获取他们的页数还有每一页的大小\r\n      handleSizeChange(val) {\r\n\t\t\t\tthis.pagesize=val;\r\n\t\t\t\tlet user=window.localStorage.getItem(\"remebermeadmin\")||{};\r\n\t\t\t\tthis.getComments(this.currentPage4,this.pagesize,user);\r\n      },\r\n      handleCurrentChange(val) {\r\n\t\t\t\tthis.currentPage4=val;\r\n\t\t\t\tlet user=window.localStorage.getItem(\"remebermeadmin\")||{};\r\n\t\t\t\tthis.getComments(this.currentPage4,this.pagesize,user);\r\n      },\r\n\t\t\tsonhandleSizeChange(val) {\r\n\t\t\t\tthis.soncomments.pageSize=val;\r\n\t\t\t\tlet user=window.localStorage.getItem(\"remebermeadmin\")||{};\r\n\t\t\t\tthis.getsonComments(this.soncomments.pageNum,this.soncomments.pageSize,user)\r\n\t\t\t},\r\n\t\t\tsonhandleCurrentChange(val) {\r\n\t\t\t\tthis.soncomments.pageNum=val;\r\n\t\t\t\tlet user=window.localStorage.getItem(\"remebermeadmin\")||{};\r\n\t\t\t\tthis.getsonComments(this.soncomments.pageNum,this.soncomments.pageSize,user)\r\n\t\t\t},\r\n\t\t\tgetComments(pageNum,pageSize,user){\r\n\t\t\t\tlet pagerequest={};\r\n\t\t\t\tpagerequest.pageNum=pageNum;\r\n\t\t\t\tpagerequest.pageSize=pageSize;\r\n\t\t\t\tpagerequest.userid=JSON.parse(user).id;\r\n\t\t\t\tparenetpagecomment(JSON.stringify(pagerequest)).then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tlet data=res.data.data;\r\n\t\t\t\t\tthis.currentPage4=data.pageNum;\r\n\t\t\t\t\tthis.pagesize=data.pageSize;\r\n\t\t\t\t\tthis.totalsize=data.totalSize;\r\n\t\t\t\t\tthis.parentcomments=data.content;\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(\"获取父评论失败\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetsonComments(pageNum,pageSize,user){\r\n\t\t\t\tlet pagerequest={};\r\n\t\t\t\tpagerequest.pageNum=pageNum;\r\n\t\t\t\tpagerequest.pageSize=pageSize;\r\n\t\t\t\tpagerequest.userid=JSON.parse(user).id;\r\n\t\t\t\tsoncommentRequest(JSON.stringify(pagerequest)).then(res=>{\r\n\t\t\t\t\tthis.soncomments=res.data.data;\r\n\t\t\t\t\tconsole.log(\"打印子组件的内容\");\r\n\t\t\t\t\tconsole.log(this.soncomments)\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(\"获取父评论失败\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdeleteCommentByItem(commentitem,commentId){\r\n\t\t\t\tconsole.log(this.tabnum)\r\n\t\t\t\t// 点击的时候获取到删除的item还有id,先保存起来,然后用模态点击确认的时候然后在调用删除函数\r\n\t\t\t\tif(this.tabnum==0){\r\n\t\t\t\t\tthis.commentitem=commentitem;\r\n\t\t\t\t\tthis.commentId=commentId;\r\n\t\t\t\t\tthis.dialogVisible=true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.soncommentitem=commentitem;\r\n\t\t\t\t\tthis.soncommentId=commentId;\r\n\t\t\t\t\tthis.sondialogVisible=true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 定义一个方法,传入一个数组,还有一个下标删除数组对应下标的元素\r\n\t\t\tremoveItemByIndex(array,index){\r\n\t\t\t\t// 如果删除的是最后一个就直接\r\n\t\t\t\tif(index==array.length-1){\r\n\t\t\t\t\tarray.pop();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor(let i=index;i<array.length;i++){\r\n\t\t\t\t\t\tarray[i]=array[i+1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarray.pop();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdeletecomment(){\r\n\t\t\t\tthis.dialogVisible=false;\r\n\t\t\t\tthis.removeItemByIndex(this.parentcomments,this.commentitem);\r\n\t\t\t\tlet parentComent={};\r\n\t\t\t\tparentComent.id=this.commentId;\r\n\t\t\t\tdeleteparentcomment(JSON.stringify(parentComent)).then(res=>{\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t   type: 'success',\r\n\t\t\t\t\t   message: '删除成功!'\r\n\t\t\t\t\t });\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(\"删除成功\")\r\n\t\t\t\t})\r\n\t\t\t\t \r\n\t\t\t},\r\n\t\t\thandleClick(tab, event) {\r\n\t\t\t\tif(tab.paneName==0){\r\n\t\t\t\t\t// 这里保留出来\r\n\t\t\t\t\t//console.log(\"这里是父评论的内容\")\r\n\t\t\t\t\tthis.tabnum=tab.paneName;\r\n\t\t\t\t}else if(tab.paneName==1){\r\n\t\t\t\t\tconsole.log(\"这里是子评论的内容\");\r\n\t\t\t\t\tthis.tabnum=tab.paneName;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n      },\r\n\t\t\tsondeletecomment(){\r\n\t\t\t\tthis.sondialogVisible=false;\r\n\t\t\t\tthis.removeItemByIndex(this.soncomments.content,this.soncommentitem);\r\n\t\t\t\tlet parentComent={};\r\n\t\t\t\tparentComent.id=this.soncommentId;\r\n\t\t\t\tdeletesoncomment(JSON.stringify(parentComent)).then(res=>{\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t   type: 'success',\r\n\t\t\t\t\t   message: '删除成功!'\r\n\t\t\t\t\t });\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(\"删除成功\")\r\n\t\t\t\t})\r\n\t\t\t}\r\n    },\r\n    data() {\r\n      return {\r\n        currentPage4: 1,\r\n\t\t\t\tpagesize:10,\r\n\t\t\t\tpagesizes:[10, 20, 30, 100],\r\n\t\t\t\ttotalsize:400,\r\n\t\t\t\tparentcomments:[],\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\tcommentitem:-1,\r\n\t\t\t\tcommentId:-1,\r\n\t\t\t\tsoncomments:{},\r\n\t\t\t\ttabnum:0,\r\n\t\t\t\tsondialogVisible:false,\r\n\t\t\t\tsoncommentitem:-1,\r\n\t\t\t\tsoncommentId:-1\r\n\t\t\t\t\r\n\t\t\t\t// 下面是子评论的内容\r\n      };\r\n    },\r\n\t\tcreated(){\r\n\t\t\t// 开始的时候发送请求获取当前初始化的评论\r\n\t\t\tlet user=window.localStorage.getItem(\"remebermeadmin\")||{};\r\n\t\t\tthis.getComments(this.currentPage4,this.pagesize,user);\r\n\t\t\t//下面是获取子评论的信息\r\n\t\t\tthis.getsonComments(this.currentPage4,this.pagesize,user);\r\n\t\t},\r\n\t\tfilters:{\r\n\t\t\tdateFilter(item){\r\n\t\t\t\tlet pointFlag=item.indexOf(\".\");\r\n\t\t\t\treturn item.substring(0,pointFlag).replace(\"T\",\"  \");\r\n\t\t\t}\r\n\t\t}\r\n  }\r\n</script>\r\n<style lang=\"less\">\r\n\t.user-content{\r\n\t\ttext-align: left;\r\n\t}\r\n</style>\r\n"]}]}