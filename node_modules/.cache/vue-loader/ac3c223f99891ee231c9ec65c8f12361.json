{"remainingRequest":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\biyesheji\\AdminView\\adminvue\\src\\components\\userdetail\\userdetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\biyesheji\\AdminView\\adminvue\\src\\components\\userdetail\\userdetail.vue","mtime":1608209007465},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCglpbXBvcnQgJ2Nyb3BwZXJqcy9kaXN0L2Nyb3BwZXIuY3NzJzsKCWltcG9ydCB7dXBsb2FkRmlsZVJlcXVlc3R9IGZyb20gJ0AvdXRpbC9yZXF1ZXN0bmV0d29yay91cGxvYWRGaWxlUmVxdWVzdCcKCWltcG9ydCB7dXNlcnJlcXVlc3R9IGZyb20gJ0AvdXRpbC9yZXF1ZXN0bmV0d29yay91c2VycmVxdWVzdCcKCS8vIOS9v+eUqG9zcwoJaW1wb3J0IHthbGliYWJhZmlsZXJlcXVlc3RpbXB9IGZyb20gJ0AvdXRpbC9yZXF1ZXN0bmV0d29yay9vc3NSZXF1ZXN0RmlsZVRvQWxpJwoJaW1wb3J0IHtmaWxlZ2V0cHJvdGl5fSBmcm9tICdAL3V0aWwvcmVxdWVzdG5ldHdvcmsvb3NzUmVxdWVzdEZpbGVUb0FsaScKCQoJaW1wb3J0IENyb3BwZXIgZnJvbSAnY3JvcHBlcmpzJzsKCWV4cG9ydCBkZWZhdWx0ewoJCW5hbWU6InVzZXJkZXRhaWwiLAoJCWRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcnVsZUZvcm06IHsKICAgICAgICAgIG5hbWU6ICcnCiAgICAgICAgfSwKICAgICAgICBydWxlczogewogICAgICAgICAgbmFtZTogWwogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICAgIHsgbWluOiAzLCBtYXg6IDE1LCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDMg5YiwIDMwIOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICBdCiAgICAgICAgfSwKCQl1c2VyOnt9LAoJCWRpYWxvZ1Zpc2libGU6IGZhbHNlLAoJCWNyb3BwcGVyOm51bGwsCgkJcHJlaW1hZ2U6IiIKICAgICAgfTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAvLyDmj5DkuqQKCQkJbGV0IHVzZXI9dGhpcy51c2VyOwoJCQl1c2VyLnVzZXJuYW1lPXRoaXMucnVsZUZvcm0ubmFtZTsKCQkJdXNlcnJlcXVlc3QoSlNPTi5zdHJpbmdpZnkodXNlcikpLnRoZW4ocmVzPT57CgkJCQljb25zb2xlLmxvZygi5L+u5pS55oiQ5YqfIik7CgkJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCXNob3dDbG9zZTogdHJ1ZSwKCQkJCW1lc3NhZ2U6ICfmga3llpzkvaDvvIzkv67mlLnkv6Hmga/miJDlip/vvIznlKjmiLfph43mlrDnmbvlvZXlsLHlj6/ku6XliLfmlrDnlKjmiLfkv6Hmga/kuoYnLAoJCQkJdHlwZTogJ3N1Y2Nlc3MnCgkJCX0pOwoJCQl9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgcmVzZXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsKICAgICAgfSwKCSAgZmlsZWNoYW5nZSgpewoJCSAgdGhpcy5kaWFsb2dWaXNpYmxlPXRydWU7CgkJICBjb25zdCBmaWxlPSB0aGlzLiRyZWZzLmZpbGVmaWxlOwoJCSAgY29uc29sZS5sb2coZmlsZSkKCQkgIHRoaXMucHJlaW1hZ2U9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5maWxlc1swXSk7CgkJICB0aGlzLiRyZWZzLmZpbGUudmFsdWU9JycKCSAgfSwKCSAgZGlhbG9nb3BlbigpewoJCSAgY29uc29sZS5sb2coIuWHuuadpeS6hiIpCgkJICAJaWYodGhpcy5jcm9wcHBlciE9bnVsbCl7CgkJICAJCXRoaXMuY3JvcHBwZXIucmVwbGFjZSh0aGlzLnByZWltYWdlKTsKCQkgIAkJcmV0dXJuOwoJCSAgCX0KCQkgIAljb25zdCBpbWFnZSA9IHRoaXMuJHJlZnMudGFyZ2V0aW1nOwoJCSAgCXRoaXMuY3JvcHBwZXI9IG5ldyBDcm9wcGVyKGltYWdlLCB7CgkJICAJYXNwZWN0UmF0aW86IDEsCgkJICAJdmlld01vZGU6MSwKCQkgIAlkcmFnTW9kZTogIm5vbmUiLAoJCSAgCWNyb3BCb3hSZXNpemFibGU6dHJ1ZSwKCQkgIAljcm9wQm94TW92YWJsZTp0cnVlCgkJICB9KTsKCgkJICB9LAoJCSAgaGVhZGltZ2NvbW1pdCgpewoJCQkgIHRoaXMuZGlhbG9nVmlzaWJsZT1mYWxzZTsKCQkJICAvLyB0aGlzLmRpYWxvZ1Zpc2libGU9ZmFsc2U7CgkJCSAgY29uc3QgZmQ9bmV3IEZvcm1EYXRhKCk7CgkJCSAgLy8gLy/ov5nph4zmlLnmiJBvc3PnmoQKCQkJICBsZXQgdXJsPSIiOwoJCQkgICBsZXQgcG9saWN5PXt9OwoJCQkgICBmdW5jdGlvbiBnZXRVVUlEICgpIHsKCQkJICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHsKCQkJICAgICAgIHJldHVybiAoYyA9PT0gJ3gnID8gKE1hdGgucmFuZG9tKCkgKiAxNiB8IDApIDogKCdyJjB4MycgfCAnMHg4JykpLnRvU3RyaW5nKDE2KQoJCQkgICAgIH0pCgkJCSAgIH0KCQkJICB0aGlzLmNyb3BwcGVyLmdldENyb3BwZWRDYW52YXMoKS50b0Jsb2IoKGZpbGUpID0+IHsKCQkJICAJLy8g6L+Z6YeM5LiK5Lyg55qE5pe25YCZ5Zug5Li65rKh5pyJ5ZCN5a2XLOaJgOS7peaJi+WKqOeahOa3u+WKoOaWh+S7tueahOWQjeWtlwoJCQkgIAlsZXQgZmlsZW5hbWU9TWF0aC5yYW5kb20oKSsiLnBuZyI7CgkJCSAgCQoJCQkJZmlsZWdldHByb3RpeSgpLnRoZW4ocmVzcG9uc2U9PnsKCQkJCQkJCQkJcG9saWN5LnBvbGljeSA9IHJlc3BvbnNlLmRhdGEucG9saWN5OwoJCQkJCQkJCQlwb2xpY3kuc2lnbmF0dXJlID0gcmVzcG9uc2UuZGF0YS5zaWduYXR1cmU7CgkJCQkJCQkJCXBvbGljeS5vc3NhY2Nlc3NLZXlJZCA9IHJlc3BvbnNlLmRhdGEuYWNjZXNzaWQ7CgkJCQkJCQkJCXBvbGljeS5rZXkgPSByZXNwb25zZS5kYXRhLmRpciArZ2V0VVVJRCgpKydfJHtmaWxlbmFtZX0nOwoJCQkJCQkJCQlwb2xpY3kuZGlyID0gcmVzcG9uc2UuZGF0YS5kaXI7CgkJCQkJCQkJCXBvbGljeS5ob3N0ID0gcmVzcG9uc2UuZGF0YS5ob3N0OwoJCQkJCQkJCQkvLyBfc2VsZi5kYXRhT2JqLnBvbGljeSA9IHJlc3BvbnNlLmRhdGEucG9saWN5OwoJCQkJCQkJCQkvLyBfc2VsZi5kYXRhT2JqLnNpZ25hdHVyZSA9IHJlc3BvbnNlLmRhdGEuc2lnbmF0dXJlOwoJCQkJCQkJCQkvLyBfc2VsZi5kYXRhT2JqLm9zc2FjY2Vzc0tleUlkID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3NpZDsKCQkJCQkJCQkJLy8gX3NlbGYuZGF0YU9iai5rZXkgPSByZXNwb25zZS5kYXRhLmRpciArdGhpcy5nZXRVVUlEKCkrJ18ke2ZpbGVuYW1lfSc7CgkJCQkJCQkJCS8vIF9zZWxmLmRhdGFPYmouZGlyID0gcmVzcG9uc2UuZGF0YS5kaXI7CgkJCQkJCQkJCS8vIF9zZWxmLmRhdGFPYmouaG9zdCA9IHJlc3BvbnNlLmRhdGEuaG9zdDsKCQkJCQkJCQkJZmQuYXBwZW5kKCJwb2xpY3kiLHBvbGljeS5wb2xpY3kpOwoJCQkJCQkJCQlmZC5hcHBlbmQoInNpZ25hdHVyZSIscG9saWN5LnNpZ25hdHVyZSk7CgkJCQkJCQkJCWZkLmFwcGVuZCgia2V5Iixwb2xpY3kua2V5KTsKCQkJCQkJCQkJZmQuYXBwZW5kKCJvc3NhY2Nlc3NLZXlJZCIscG9saWN5Lm9zc2FjY2Vzc0tleUlkKTsKCQkJCQkJCQkJZmQuYXBwZW5kKCJkaXIiLHBvbGljeS5kaXIpOwoJCQkJCQkJCQlmZC5hcHBlbmQoImhvc3QiLHBvbGljeS5ob3N0KTsKCQkJCQkJCQkJZmQuYXBwZW5kKCJmaWxlIixmaWxlLGZpbGVuYW1lKTsKCQkJCQkJCQkJCgkJCQkJCQkJICBhbGliYWJhZmlsZXJlcXVlc3RpbXAoZmQpLnRoZW4ocmVzPT57CgkJCQkJCQkJCQl1cmw9cG9saWN5Lmhvc3QgKyAnLycgKyBwb2xpY3kua2V5LnJlcGxhY2UoIiR7ZmlsZW5hbWV9IixmaWxlbmFtZSk7CgkJCQkJCQkJCQl0aGlzLnVzZXIudXNlcmltYWdlPXVybDsKCQkJCQkJCQkJCWNvbnNvbGUubG9nKCLpnZ7lvpciKQoJCQkJCQkJCQkJY29uc29sZS5sb2codGhpcy51c2VyLnVzZXJpbWFnZSkKCQkJCQkJCQkJCXRoaXMuZGlhbG9nVmlzaWJsZT1mYWxzZTsKCQkJCQkJCQkJfSkKCQkJCQkJCQkJCgkJCQkJCQkJfSkKCQkJCQoJCQkgIAkvLyB1cGxvYWRGaWxlUmVxdWVzdChmb3JtRGF0YSkudGhlbihyZXM9PnsKCQkJICAJCS8vIGxldCByZXN1bHRpbWc9cmVzLmRhdGEuZGF0YTsKCQkJICAJCS8vIHRoaXMudXNlci51c2VyaW1hZ2U9cmVzdWx0aW1nOwoJCQkgIAkJLy8gdGhpcy5kaWFsb2dWaXNpYmxlPWZhbHNlOwoJCQkgIAkvLyB9KS5jYXRjaChlcnJvcj0+ewoJCQkgIAkvLyAJCgkJCSAgCS8vIH0pCgkJCSAgCX0pCgkJICB9CiAgICB9LAoJY3JlYXRlZCgpewoJCXRoaXMudXNlcj10aGlzLiRzdG9yZS5zdGF0ZS51c2VyOwoJCXRoaXMucnVsZUZvcm0ubmFtZT10aGlzLnVzZXIudXNlcm5hbWU7Cgl9Cgl9Cg=="},{"version":3,"sources":["userdetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userdetail.vue","sourceRoot":"src/components/userdetail","sourcesContent":["<template>\r\n\t<div class=\"userdetail\">\r\n\t\t<el-card class=\"box-card\">\r\n\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t\t\t<el-breadcrumb-item :to=\"{ path: '/admin' }\">首页</el-breadcrumb-item>\r\n\t\t\t\t\t<el-breadcrumb-item>用户详情</el-breadcrumb-item>\r\n\t\t\t\t</el-breadcrumb>\r\n\t\t\t</div>\r\n\t\t\t<el-dialog\r\n\t\ttitle=\"选择图片\"\r\n\t\t:visible.sync=\"dialogVisible\"\r\n\t\twidth=\"30%\"\r\n\t\t@opened=\"dialogopen\"\r\n\t\t>\r\n\t\t<div>\r\n\t\t\t<img :src=\"preimage\" alt=\"\" style=\"display: block;max-width: 100%;\" ref=\"targetimg\">\r\n\t\t</div>\r\n\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n\t\t\t<el-button type=\"primary\" @click=\"headimgcommit\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t\t</el-dialog>\r\n\t\t\t<div class=\"userdetail_img\">\r\n\t\t\t\t<img :src=\"user.userimage\" alt=\"\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label for=\"file\"><el-tag >点击修改头像</el-tag></label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<input type=\"file\" hidden id=\"file\" ref=\"filefile\" @change=\"filechange\" >\r\n\t\t\t<div class=\"userdetail_from\">\r\n\t\t\t\t\t<el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n\t\t\t\t\t\t<el-form-item label=\"用户名\" prop=\"name\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"ruleForm.name\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即修改</el-button>\r\n\t\t\t\t\t<el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n  </el-form-item>\r\n</el-form>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t</div>\n</template>\n\n<script>\r\n\timport 'cropperjs/dist/cropper.css';\r\n\timport {uploadFileRequest} from '@/util/requestnetwork/uploadFileRequest'\r\n\timport {userrequest} from '@/util/requestnetwork/userrequest'\r\n\t// 使用oss\r\n\timport {alibabafilerequestimp} from '@/util/requestnetwork/ossRequestFileToAli'\r\n\timport {filegetprotiy} from '@/util/requestnetwork/ossRequestFileToAli'\r\n\t\r\n\timport Cropper from 'cropperjs';\r\n\texport default{\r\n\t\tname:\"userdetail\",\r\n\t\tdata() {\r\n      return {\r\n        ruleForm: {\r\n          name: ''\r\n        },\r\n        rules: {\r\n          name: [\r\n            { required: true, message: '请输入用户名', trigger: 'blur' },\r\n            { min: 3, max: 15, message: '长度在 3 到 30 个字符', trigger: 'blur' }\r\n          ]\r\n        },\r\n\t\tuser:{},\r\n\t\tdialogVisible: false,\r\n\t\tcroppper:null,\r\n\t\tpreimage:\"\"\r\n      };\r\n    },\r\n    methods: {\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            // 提交\r\n\t\t\tlet user=this.user;\r\n\t\t\tuser.username=this.ruleForm.name;\r\n\t\t\tuserrequest(JSON.stringify(user)).then(res=>{\r\n\t\t\t\tconsole.log(\"修改成功\");\r\n\t\t\t\tthis.$message({\r\n\t\t\t\tshowClose: true,\r\n\t\t\t\tmessage: '恭喜你，修改信息成功，用户重新登录就可以刷新用户信息了',\r\n\t\t\t\ttype: 'success'\r\n\t\t\t});\r\n\t\t\t})\r\n          } else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      },\r\n\t  filechange(){\r\n\t\t  this.dialogVisible=true;\r\n\t\t  const file= this.$refs.filefile;\r\n\t\t  console.log(file)\r\n\t\t  this.preimage=window.URL.createObjectURL(file.files[0]);\r\n\t\t  this.$refs.file.value=''\r\n\t  },\r\n\t  dialogopen(){\r\n\t\t  console.log(\"出来了\")\r\n\t\t  \tif(this.croppper!=null){\r\n\t\t  \t\tthis.croppper.replace(this.preimage);\r\n\t\t  \t\treturn;\r\n\t\t  \t}\r\n\t\t  \tconst image = this.$refs.targetimg;\r\n\t\t  \tthis.croppper= new Cropper(image, {\r\n\t\t  \taspectRatio: 1,\r\n\t\t  \tviewMode:1,\r\n\t\t  \tdragMode: \"none\",\r\n\t\t  \tcropBoxResizable:true,\r\n\t\t  \tcropBoxMovable:true\r\n\t\t  });\r\n\r\n\t\t  },\r\n\t\t  headimgcommit(){\r\n\t\t\t  this.dialogVisible=false;\r\n\t\t\t  // this.dialogVisible=false;\r\n\t\t\t  const fd=new FormData();\r\n\t\t\t  // //这里改成oss的\r\n\t\t\t  let url=\"\";\r\n\t\t\t   let policy={};\r\n\t\t\t   function getUUID () {\r\n\t\t\t     return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\t\t       return (c === 'x' ? (Math.random() * 16 | 0) : ('r&0x3' | '0x8')).toString(16)\r\n\t\t\t     })\r\n\t\t\t   }\r\n\t\t\t  this.croppper.getCroppedCanvas().toBlob((file) => {\r\n\t\t\t  \t// 这里上传的时候因为没有名字,所以手动的添加文件的名字\r\n\t\t\t  \tlet filename=Math.random()+\".png\";\r\n\t\t\t  \t\r\n\t\t\t\tfilegetprotiy().then(response=>{\r\n\t\t\t\t\t\t\t\t\tpolicy.policy = response.data.policy;\r\n\t\t\t\t\t\t\t\t\tpolicy.signature = response.data.signature;\r\n\t\t\t\t\t\t\t\t\tpolicy.ossaccessKeyId = response.data.accessid;\r\n\t\t\t\t\t\t\t\t\tpolicy.key = response.data.dir +getUUID()+'_${filename}';\r\n\t\t\t\t\t\t\t\t\tpolicy.dir = response.data.dir;\r\n\t\t\t\t\t\t\t\t\tpolicy.host = response.data.host;\r\n\t\t\t\t\t\t\t\t\t// _self.dataObj.policy = response.data.policy;\r\n\t\t\t\t\t\t\t\t\t// _self.dataObj.signature = response.data.signature;\r\n\t\t\t\t\t\t\t\t\t// _self.dataObj.ossaccessKeyId = response.data.accessid;\r\n\t\t\t\t\t\t\t\t\t// _self.dataObj.key = response.data.dir +this.getUUID()+'_${filename}';\r\n\t\t\t\t\t\t\t\t\t// _self.dataObj.dir = response.data.dir;\r\n\t\t\t\t\t\t\t\t\t// _self.dataObj.host = response.data.host;\r\n\t\t\t\t\t\t\t\t\tfd.append(\"policy\",policy.policy);\r\n\t\t\t\t\t\t\t\t\tfd.append(\"signature\",policy.signature);\r\n\t\t\t\t\t\t\t\t\tfd.append(\"key\",policy.key);\r\n\t\t\t\t\t\t\t\t\tfd.append(\"ossaccessKeyId\",policy.ossaccessKeyId);\r\n\t\t\t\t\t\t\t\t\tfd.append(\"dir\",policy.dir);\r\n\t\t\t\t\t\t\t\t\tfd.append(\"host\",policy.host);\r\n\t\t\t\t\t\t\t\t\tfd.append(\"file\",file,filename);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t  alibabafilerequestimp(fd).then(res=>{\r\n\t\t\t\t\t\t\t\t\t\turl=policy.host + '/' + policy.key.replace(\"${filename}\",filename);\r\n\t\t\t\t\t\t\t\t\t\tthis.user.userimage=url;\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"非得\")\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(this.user.userimage)\r\n\t\t\t\t\t\t\t\t\t\tthis.dialogVisible=false;\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t  \t// uploadFileRequest(formData).then(res=>{\r\n\t\t\t  \t\t// let resultimg=res.data.data;\r\n\t\t\t  \t\t// this.user.userimage=resultimg;\r\n\t\t\t  \t\t// this.dialogVisible=false;\r\n\t\t\t  \t// }).catch(error=>{\r\n\t\t\t  \t// \t\r\n\t\t\t  \t// })\r\n\t\t\t  \t})\r\n\t\t  }\r\n    },\r\n\tcreated(){\r\n\t\tthis.user=this.$store.state.user;\r\n\t\tthis.ruleForm.name=this.user.username;\r\n\t}\r\n\t}\n</script>\n\n<style lang=\"less\">\r\n\t.userdetail{\r\n\t\t.userdetail_img{\r\n\t\t\t\r\n\t\t}\r\n\t\t.userdetail_from{\r\n\t\t\tmargin-top: 10px;\r\n\t\t}\r\n\t}\n</style>\n"]}]}