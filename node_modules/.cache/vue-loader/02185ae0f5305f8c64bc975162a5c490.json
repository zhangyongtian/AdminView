{"remainingRequest":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\biyesheji\\AdminView\\adminvue\\src\\components\\publicizeaticle\\upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\biyesheji\\AdminView\\adminvue\\src\\components\\publicizeaticle\\upload.vue","mtime":1608187784881},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCglpbXBvcnQge29zc2ZpbGV1cGxvYWR9IGZyb20gIkAvdXRpbC9yZXF1ZXN0bmV0d29yay9Pc3NGaWxlVXBsb2FkIgogIGV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAoJCQlkYXRhT2JqOiB7CgkJCSAgcG9saWN5OiAnJywKCQkJICBzaWduYXR1cmU6ICcnLAoJCQkgIGtleTogJycsCgkJCSAgb3NzYWNjZXNzS2V5SWQ6ICcnLAoJCQkgIGRpcjogJycsCgkJCSAgaG9zdDogJycsCgkJCSAgLy8gY2FsbGJhY2s6JycsCgkJCX0KICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpOwogICAgICAgICAgfSwKICAgICAgICAgIGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyhmaWxlKSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsKICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgIH0sCgkJc3VjY2Vzc1VwbG9hZChyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpewoJCQl0aGlzLmZpbGVMaXN0LnBvcCgpOwoJCQl0aGlzLmZpbGVMaXN0LnB1c2goe25hbWU6IGZpbGUubmFtZSwgdXJsOiB0aGlzLmRhdGFPYmouaG9zdCArICcvJyArIHRoaXMuZGF0YU9iai5rZXkucmVwbGFjZSgiJHtmaWxlbmFtZX0iLGZpbGUubmFtZSkgfSk7CgkJCWNvbnNvbGUubG9nKCLmnIDlkI7nmoTmlofku7blnLDlnYDmmK8iK3RoaXMuZmlsZUxpc3RbMF0udXJsKQoJCQl0aGlzLiRlbWl0KCJnZXRoZWFkaW1nIix0aGlzLmZpbGVMaXN0WzBdLnVybCk7CgkJfSwKCQliZWZvcmVVcGxvYWQoZmlsZSkgewoJCSAgbGV0IF9zZWxmID0gdGhpczsKCQkgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57CgkJCSAgb3NzZmlsZXVwbG9hZCgpLnRoZW4ocmVzcG9uc2U9PnsKCQkJICAJCQkgIGNvbnNvbGUubG9nKCLntKvnuqLoibLlk6XmmK8iKQoJCQkgIAkJCSAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSkKCQkJICAJCQkgIF9zZWxmLmRhdGFPYmoucG9saWN5ID0gcmVzcG9uc2UuZGF0YS5wb2xpY3k7CgkJCSAgCQkJICBfc2VsZi5kYXRhT2JqLnNpZ25hdHVyZSA9IHJlc3BvbnNlLmRhdGEuc2lnbmF0dXJlOwoJCQkgIAkJCSAgX3NlbGYuZGF0YU9iai5vc3NhY2Nlc3NLZXlJZCA9IHJlc3BvbnNlLmRhdGEuYWNjZXNzaWQ7CgkJCSAgCQkJICBfc2VsZi5kYXRhT2JqLmtleSA9IHJlc3BvbnNlLmRhdGEuZGlyICt0aGlzLmdldFVVSUQoKSsnXyR7ZmlsZW5hbWV9JzsKCQkJICAJCQkgIF9zZWxmLmRhdGFPYmouZGlyID0gcmVzcG9uc2UuZGF0YS5kaXI7CgkJCSAgCQkJICBfc2VsZi5kYXRhT2JqLmhvc3QgPSByZXNwb25zZS5kYXRhLmhvc3Q7CgkJCQkJcmVzb2x2ZSh0cnVlKQoJCQkgIH0pLmNhdGNoKGVycm9yPT57CgkJCSAgCQlyZWplY3QoZmFsc2UpCSAgCgkJCSAgfSkKCQkgIH0pCgkJICAKCQl9LAoJCWdldFVVSUQgKCkgewoJCSAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgYyA9PiB7CgkJICAgIHJldHVybiAoYyA9PT0gJ3gnID8gKE1hdGgucmFuZG9tKCkgKiAxNiB8IDApIDogKCdyJjB4MycgfCAnMHg4JykpLnRvU3RyaW5nKDE2KQoJCSAgfSkKCQl9CiAgICAgICAgfSwKCQljb21wdXRlZDp7CgkJCWZpbGVMaXN0KCkgewoJCQkgIHJldHVybiBbXQoJCQl9CgkJfQogIH0K"},{"version":3,"sources":["upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"upload.vue","sourceRoot":"src/components/publicizeaticle","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-upload\r\n\t\t  action=\"https://huabei5zhanh.oss-cn-huhehaote.aliyuncs.com\"\r\n\t\t  :data=\"dataObj\"\r\n\t\t  list-type=\"picture-card\"\r\n\t\t  :on-preview=\"handlePictureCardPreview\"\r\n\t\t  :on-remove=\"handleRemove\"\r\n\t\t\t:multiple=\"false\"\r\n\t\t\t:on-success=\"successUpload\"\r\n\t\t\t:before-upload=\"beforeUpload\"\r\n\t\t  :file-list=\"fileList\">\r\n\t\t  <i class=\"el-icon-plus\"></i>\r\n\t\t</el-upload>\r\n\t\t<el-dialog :visible.sync=\"dialogVisible\">\r\n\t\t  <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {ossfileupload} from \"@/util/requestnetwork/OssFileUpload\"\r\n  export default {\r\n    data() {\r\n          return {\r\n            dialogImageUrl: '',\r\n            dialogVisible: false,\r\n\t\t\tdataObj: {\r\n\t\t\t  policy: '',\r\n\t\t\t  signature: '',\r\n\t\t\t  key: '',\r\n\t\t\t  ossaccessKeyId: '',\r\n\t\t\t  dir: '',\r\n\t\t\t  host: '',\r\n\t\t\t  // callback:'',\r\n\t\t\t}\r\n          };\r\n        },\r\n        methods: {\r\n          handleRemove(file, fileList) {\r\n            console.log(file, fileList);\r\n          },\r\n          handlePictureCardPreview(file) {\r\n            this.dialogImageUrl = file.url;\r\n            this.dialogVisible = true;\r\n          },\r\n\t\tsuccessUpload(response, file, fileList){\r\n\t\t\tthis.fileList.pop();\r\n\t\t\tthis.fileList.push({name: file.name, url: this.dataObj.host + '/' + this.dataObj.key.replace(\"${filename}\",file.name) });\r\n\t\t\tconsole.log(\"最后的文件地址是\"+this.fileList[0].url)\r\n\t\t\tthis.$emit(\"getheadimg\",this.fileList[0].url);\r\n\t\t},\r\n\t\tbeforeUpload(file) {\r\n\t\t  let _self = this;\r\n\t\t  return new Promise((resolve,reject)=>{\r\n\t\t\t  ossfileupload().then(response=>{\r\n\t\t\t  \t\t\t  console.log(\"紫红色哥是\")\r\n\t\t\t  \t\t\t  console.log(response.data)\r\n\t\t\t  \t\t\t  _self.dataObj.policy = response.data.policy;\r\n\t\t\t  \t\t\t  _self.dataObj.signature = response.data.signature;\r\n\t\t\t  \t\t\t  _self.dataObj.ossaccessKeyId = response.data.accessid;\r\n\t\t\t  \t\t\t  _self.dataObj.key = response.data.dir +this.getUUID()+'_${filename}';\r\n\t\t\t  \t\t\t  _self.dataObj.dir = response.data.dir;\r\n\t\t\t  \t\t\t  _self.dataObj.host = response.data.host;\r\n\t\t\t\t\tresolve(true)\r\n\t\t\t  }).catch(error=>{\r\n\t\t\t  \t\treject(false)\t  \r\n\t\t\t  })\r\n\t\t  })\r\n\t\t  \r\n\t\t},\r\n\t\tgetUUID () {\r\n\t\t  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\t    return (c === 'x' ? (Math.random() * 16 | 0) : ('r&0x3' | '0x8')).toString(16)\r\n\t\t  })\r\n\t\t}\r\n        },\r\n\t\tcomputed:{\r\n\t\t\tfileList() {\r\n\t\t\t  return []\r\n\t\t\t}\r\n\t\t}\r\n  }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}