{"remainingRequest":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\thread-loader\\dist\\cjs.js!D:\\biyesheji\\AdminView\\adminvue\\node_modules\\babel-loader\\lib\\index.js!D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\biyesheji\\AdminView\\adminvue\\src\\components\\Photo\\photoupdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\biyesheji\\AdminView\\adminvue\\src\\components\\Photo\\photoupdate.vue","mtime":1608210802854},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgJ2Nyb3BwZXJqcy9kaXN0L2Nyb3BwZXIuY3NzJzsKaW1wb3J0IHsgdXBsb2FkRmlsZVJlcXVlc3QgfSBmcm9tICdAL3V0aWwvcmVxdWVzdG5ldHdvcmsvdXBsb2FkRmlsZVJlcXVlc3QnOwppbXBvcnQgeyB1cGRhdGVQaG90b0J5SWQgfSBmcm9tICdAL3V0aWwvcmVxdWVzdG5ldHdvcmsvYWRtaW5yZXF1ZXN0JzsKaW1wb3J0IHsgZ2V0UGhvdG9CeUlkIH0gZnJvbSAiQC91dGlsL3JlcXVlc3RuZXR3b3JrL2FkbWlucmVxdWVzdCI7CmltcG9ydCBDcm9wcGVyIGZyb20gJ2Nyb3BwZXJqcyc7IC8vIOS9v+eUqG9zcwoKaW1wb3J0IHsgYWxpYmFiYWZpbGVyZXF1ZXN0aW1wIH0gZnJvbSAnQC91dGlsL3JlcXVlc3RuZXR3b3JrL29zc1JlcXVlc3RGaWxlVG9BbGknOwppbXBvcnQgeyBmaWxlZ2V0cHJvdGl5IH0gZnJvbSAnQC91dGlsL3JlcXVlc3RuZXR3b3JrL29zc1JlcXVlc3RGaWxlVG9BbGknOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInBob3RvdXBkYXRlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHByZWltZzogIiIsCiAgICAgIGNyb3BwZXI6IG51bGwsCiAgICAgIHBob3RvOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dkcmFnOiBmdW5jdGlvbiBzaG93ZHJhZygpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdmFyIGZpbGUgPSB0aGlzLiRyZWZzLmZpbGU7CiAgICAgIHRoaXMucHJlaW1nID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5maWxlc1swXSk7CiAgICAgIHRoaXMuJHJlZnMuZmlsZS52YWx1ZSA9ICcnOwogICAgfSwKICAgIHNob3dvcGVuZDogZnVuY3Rpb24gc2hvd29wZW5kKCkgewogICAgICBpZiAodGhpcy5jcm9wcGVyICE9IG51bGwpIHsKICAgICAgICB0aGlzLmNyb3BwZXIucmVwbGFjZSh0aGlzLnByZWltZyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaW1nZyA9IHRoaXMuJHJlZnMudGFyaW1nOwogICAgICB0aGlzLmNyb3BwZXIgPSBuZXcgQ3JvcHBlcihpbWdnLCB7CiAgICAgICAgYXNwZWN0UmF0aW86IDIsCiAgICAgICAgdmlld01vZGU6IDEsCiAgICAgICAgZHJhZ01vZGU6ICJub25lIiwKICAgICAgICBjcm9wQm94UmVzaXphYmxlOiB0cnVlLAogICAgICAgIGNyb3BCb3hNb3ZhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfSwKICAgIGNvbW1pdHBob3RvOiBmdW5jdGlvbiBjb21taXRwaG90bygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIHRoaXMuZGlhbG9nVmlzaWJsZT1mYWxzZTsKICAgICAgdGhpcy5jcm9wcGVyLmdldENyb3BwZWRDYW52YXMoKS50b0Jsb2IoZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTsgLy8gLy/ov5nph4zmlLnmiJBvc3PnmoQKCiAgICAgICAgdmFyIHVybCA9ICIiOwogICAgICAgIHZhciBwb2xpY3kgPSB7fTsKCiAgICAgICAgZnVuY3Rpb24gZ2V0VVVJRCgpIHsKICAgICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgIHJldHVybiAoYyA9PT0gJ3gnID8gTWF0aC5yYW5kb20oKSAqIDE2IHwgMCA6ICdyJjB4MycgfCAnMHg4JykudG9TdHJpbmcoMTYpOwogICAgICAgICAgfSk7CiAgICAgICAgfSAvLyDov5nph4zkuIrkvKDnmoTml7blgJnlm6DkuLrmsqHmnInlkI3lrZcs5omA5Lul5omL5Yqo55qE5re75Yqg5paH5Lu255qE5ZCN5a2XCgoKICAgICAgICB2YXIgZmlsZW5hbWUgPSBNYXRoLnJhbmRvbSgpICsgIi5wbmciOwogICAgICAgIGZpbGVnZXRwcm90aXkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcG9saWN5LnBvbGljeSA9IHJlc3BvbnNlLmRhdGEucG9saWN5OwogICAgICAgICAgcG9saWN5LnNpZ25hdHVyZSA9IHJlc3BvbnNlLmRhdGEuc2lnbmF0dXJlOwogICAgICAgICAgcG9saWN5Lm9zc2FjY2Vzc0tleUlkID0gcmVzcG9uc2UuZGF0YS5hY2Nlc3NpZDsKICAgICAgICAgIHBvbGljeS5rZXkgPSByZXNwb25zZS5kYXRhLmRpciArIGdldFVVSUQoKSArICdfJHtmaWxlbmFtZX0nOwogICAgICAgICAgcG9saWN5LmRpciA9IHJlc3BvbnNlLmRhdGEuZGlyOwogICAgICAgICAgcG9saWN5Lmhvc3QgPSByZXNwb25zZS5kYXRhLmhvc3Q7IC8vIF9zZWxmLmRhdGFPYmoucG9saWN5ID0gcmVzcG9uc2UuZGF0YS5wb2xpY3k7CiAgICAgICAgICAvLyBfc2VsZi5kYXRhT2JqLnNpZ25hdHVyZSA9IHJlc3BvbnNlLmRhdGEuc2lnbmF0dXJlOwogICAgICAgICAgLy8gX3NlbGYuZGF0YU9iai5vc3NhY2Nlc3NLZXlJZCA9IHJlc3BvbnNlLmRhdGEuYWNjZXNzaWQ7CiAgICAgICAgICAvLyBfc2VsZi5kYXRhT2JqLmtleSA9IHJlc3BvbnNlLmRhdGEuZGlyICt0aGlzLmdldFVVSUQoKSsnXyR7ZmlsZW5hbWV9JzsKICAgICAgICAgIC8vIF9zZWxmLmRhdGFPYmouZGlyID0gcmVzcG9uc2UuZGF0YS5kaXI7CiAgICAgICAgICAvLyBfc2VsZi5kYXRhT2JqLmhvc3QgPSByZXNwb25zZS5kYXRhLmhvc3Q7CgogICAgICAgICAgZmQuYXBwZW5kKCJwb2xpY3kiLCBwb2xpY3kucG9saWN5KTsKICAgICAgICAgIGZkLmFwcGVuZCgic2lnbmF0dXJlIiwgcG9saWN5LnNpZ25hdHVyZSk7CiAgICAgICAgICBmZC5hcHBlbmQoImtleSIsIHBvbGljeS5rZXkpOwogICAgICAgICAgZmQuYXBwZW5kKCJvc3NhY2Nlc3NLZXlJZCIsIHBvbGljeS5vc3NhY2Nlc3NLZXlJZCk7CiAgICAgICAgICBmZC5hcHBlbmQoImRpciIsIHBvbGljeS5kaXIpOwogICAgICAgICAgZmQuYXBwZW5kKCJob3N0IiwgcG9saWN5Lmhvc3QpOwogICAgICAgICAgZmQuYXBwZW5kKCJmaWxlIiwgZmlsZSwgZmlsZW5hbWUpOwogICAgICAgICAgYWxpYmFiYWZpbGVyZXF1ZXN0aW1wKGZkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgdXJsID0gcG9saWN5Lmhvc3QgKyAnLycgKyBwb2xpY3kua2V5LnJlcGxhY2UoIiR7ZmlsZW5hbWV9IiwgZmlsZW5hbWUpOwogICAgICAgICAgICBfdGhpcy5waG90by5pbWd1cmwgPSB1cmw7CiAgICAgICAgICAgIHZhciBpbWcgPSB7fTsKICAgICAgICAgICAgaW1nLmltZ3VybCA9IF90aGlzLnBob3RvLmltZ3VybDsKICAgICAgICAgICAgaW1nLmlkID0gX3RoaXMucGhvdG8uaWQ7CiAgICAgICAgICAgIHVwZGF0ZVBob3RvQnlJZChKU09OLnN0cmluZ2lmeShpbWcpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmga3llpzkvaDvvIzkv67mlLnmiJDlip8nLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge30pOwogICAgICAgICAgICBfdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsgLy8gCQkJdXBsb2FkRmlsZVJlcXVlc3QoZm9ybURhdGEpLnRoZW4ocmVzPT57CiAgICAgICAgLy8gCiAgICAgICAgLy8gCQkJbGV0IHJlc3VsdGltZz1yZXMuZGF0YS5kYXRhOwogICAgICAgIC8vIAkJCXRoaXMucGhvdG8uaW1ndXJsPXJlc3VsdGltZzsKICAgICAgICAvLyAJCQlsZXQgaW1nPXt9OwogICAgICAgIC8vIAkJCWltZy5pbWd1cmw9dGhpcy5waG90by5pbWd1cmw7CiAgICAgICAgLy8gCQkJaW1nLmlkPXRoaXMucGhvdG8uaWQ7CiAgICAgICAgLy8gCQkJdXBkYXRlUGhvdG9CeUlkKEpTT04uc3RyaW5naWZ5KGltZykpLnRoZW4ocmVzPT57CiAgICAgICAgLy8gCQkJCXRoaXMuZGlhbG9nVmlzaWJsZT1mYWxzZTsKICAgICAgICAvLyAJCQkJIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIC8vIAkJCQltZXNzYWdlOiAn5oGt5Zac5L2g77yM5L+u5pS55oiQ5YqfJywKICAgICAgICAvLyAJCQkJdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgLy8gCQkJCX0pOwogICAgICAgIC8vIAkJCX0pLmNhdGNoKGVycm9yPT57CiAgICAgICAgLy8gCQkJCQogICAgICAgIC8vIAkJCX0pCiAgICAgICAgLy8gCQkJfSkuY2F0Y2goZXJyb3I9PnsKICAgICAgICAvLyAKICAgICAgICAvLyAJCQl9KQogICAgICAgIC8v6L+Z6YeM5piv5oiq5q2i55qE5Zyw5pa5CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHZhciBwaG90byA9IHt9OwogICAgcGhvdG8uaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXNbInBob3RvaWQiXTsKICAgIGdldFBob3RvQnlJZChKU09OLnN0cmluZ2lmeShwaG90bykpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBfdGhpczIucGhvdG8gPSByZXMuZGF0YS5kYXRhOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7fSk7CiAgfQp9Ow=="},{"version":3,"sources":["photoupdate.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"photoupdate\">\r\n\t\t<el-dialog\r\n\t\ttitle=\"提示\"\r\n\t\t:visible.sync=\"dialogVisible\"\r\n\t\twidth=\"30%\"\r\n\t\t@opened=\"showopend\"\r\n\t\t>\r\n\t\t\t<div>\r\n\t\t\t\t<img :src=\"preimg\" alt=\"\" style=\"display: block;max-width: 100%;\" ref=\"tarimg\">\r\n\t\t\t</div>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n\t\t\t<el-button type=\"primary\" @click=\"commitphoto\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t\r\n\t\t<el-card class=\"box-card\">\r\n\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t\t\t<el-breadcrumb-item :to=\"{ path: '/admin/photoadmin' }\">超级管理员界面</el-breadcrumb-item>\r\n\t\t\t\t\t<el-breadcrumb-item>图片修改</el-breadcrumb-item>\r\n\t\t\t\t</el-breadcrumb>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<el-card class=\"box-card\">\r\n\t\t\t\t\t<img :src=\"photo.imgurl\" alt=\"\">\r\n\t\t\t\t</el-card>\r\n\t\t\t\t<input type=\"file\" hidden=\"hidden\" id=\"file\" @change=\"showdrag\" ref=\"file\">\r\n\t\t\t\t<el-button type=\"primary\" style=\"margin-top: 10px;\"><label for=\"file\">点击修改</label></el-button>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t</div>\n</template>\n\n<script>\r\n\timport 'cropperjs/dist/cropper.css';\r\n\timport {uploadFileRequest} from '@/util/requestnetwork/uploadFileRequest'\r\n\timport {updatePhotoById} from '@/util/requestnetwork/adminrequest'\r\n\t\r\n\timport {getPhotoById} from \"@/util/requestnetwork/adminrequest\"\r\n\t\r\n\timport Cropper from 'cropperjs';\r\n\t\r\n\t\t// 使用oss\r\n\timport {alibabafilerequestimp} from '@/util/requestnetwork/ossRequestFileToAli'\r\n\timport {filegetprotiy} from '@/util/requestnetwork/ossRequestFileToAli'\r\n\texport default{\r\n\t\tname:\"photoupdate\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\tpreimg:\"\",\r\n\t\t\t\tcropper:null,\r\n\t\t\t\tphoto:{}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tshowdrag() {\r\n\t\t\t\tthis.dialogVisible=true;\r\n\t\t\t\tconst file=this.$refs.file;\r\n\t\t\t\tthis.preimg=window.URL.createObjectURL(file.files[0]);\r\n\t\t\t\tthis.$refs.file.value=''\r\n\t\t\t},\r\n\t\t\tshowopend(){\r\n\t\t\t\tif(this.cropper!=null){\r\n\t\t\t\t\tthis.cropper.replace(this.preimg);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst imgg=this.$refs.tarimg;\r\n\t\t\t\tthis.cropper=new Cropper(imgg,{\r\n\t\t\t\t\taspectRatio: 2,\r\n\t\t\t\t\tviewMode:1,\r\n\t\t\t\t\tdragMode: \"none\",\r\n\t\t\t\t\tcropBoxResizable:true,\r\n\t\t\t\t\tcropBoxMovable:true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcommitphoto(){\r\n\t\t\t\t// this.dialogVisible=false;\r\n\r\n\t\t\tthis.cropper.getCroppedCanvas().toBlob((file) => {\r\n\t\t\t\t\r\n\t\t\tconst fd=new FormData();\r\n\t\t\t// //这里改成oss的\r\n\t\t\tlet url=\"\";\r\n\t\t\t let policy={};\r\n\t\t\t function getUUID () {\r\n\t\t\t   return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\t\t     return (c === 'x' ? (Math.random() * 16 | 0) : ('r&0x3' | '0x8')).toString(16)\r\n\t\t\t   })\r\n\t\t\t }\r\n\t\t\t\t\r\n\t\t\t\t\r\n\r\n// 这里上传的时候因为没有名字,所以手动的添加文件的名字\r\n\r\n\t\t\tlet filename=Math.random()+\".png\";\r\n\t\t\t\r\n\t\t\tfilegetprotiy().then(response=>{\r\n\t\t\t\t\t\t\t\tpolicy.policy = response.data.policy;\r\n\t\t\t\t\t\t\t\tpolicy.signature = response.data.signature;\r\n\t\t\t\t\t\t\t\tpolicy.ossaccessKeyId = response.data.accessid;\r\n\t\t\t\t\t\t\t\tpolicy.key = response.data.dir +getUUID()+'_${filename}';\r\n\t\t\t\t\t\t\t\tpolicy.dir = response.data.dir;\r\n\t\t\t\t\t\t\t\tpolicy.host = response.data.host;\r\n\t\t\t\t\t\t\t\t// _self.dataObj.policy = response.data.policy;\r\n\t\t\t\t\t\t\t\t// _self.dataObj.signature = response.data.signature;\r\n\t\t\t\t\t\t\t\t// _self.dataObj.ossaccessKeyId = response.data.accessid;\r\n\t\t\t\t\t\t\t\t// _self.dataObj.key = response.data.dir +this.getUUID()+'_${filename}';\r\n\t\t\t\t\t\t\t\t// _self.dataObj.dir = response.data.dir;\r\n\t\t\t\t\t\t\t\t// _self.dataObj.host = response.data.host;\r\n\t\t\t\t\t\t\t\tfd.append(\"policy\",policy.policy);\r\n\t\t\t\t\t\t\t\tfd.append(\"signature\",policy.signature);\r\n\t\t\t\t\t\t\t\tfd.append(\"key\",policy.key);\r\n\t\t\t\t\t\t\t\tfd.append(\"ossaccessKeyId\",policy.ossaccessKeyId);\r\n\t\t\t\t\t\t\t\tfd.append(\"dir\",policy.dir);\r\n\t\t\t\t\t\t\t\tfd.append(\"host\",policy.host);\r\n\t\t\t\t\t\t\t\tfd.append(\"file\",file,filename);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t  alibabafilerequestimp(fd).then(res=>{\r\n\t\t\t\t\t\t\t\t\turl=policy.host + '/' + policy.key.replace(\"${filename}\",filename);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.photo.imgurl=url;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet img={};\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.imgurl=this.photo.imgurl;\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.id=this.photo.id;\r\n\t\t\t\t\t\t\t\t\t\t\t\tupdatePhotoById(JSON.stringify(img)).then(res=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.dialogVisible=false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t this.$message({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: '恭喜你，修改成功',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tthis.dialogVisible=false;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\r\n\r\n// \t\t\tuploadFileRequest(formData).then(res=>{\r\n// \r\n// \t\t\tlet resultimg=res.data.data;\r\n// \t\t\tthis.photo.imgurl=resultimg;\r\n// \t\t\tlet img={};\r\n// \t\t\timg.imgurl=this.photo.imgurl;\r\n// \t\t\timg.id=this.photo.id;\r\n// \t\t\tupdatePhotoById(JSON.stringify(img)).then(res=>{\r\n// \t\t\t\tthis.dialogVisible=false;\r\n// \t\t\t\t this.$message({\r\n// \t\t\t\tmessage: '恭喜你，修改成功',\r\n// \t\t\t\ttype: 'success'\r\n// \t\t\t\t});\r\n// \t\t\t}).catch(error=>{\r\n// \t\t\t\t\r\n// \t\t\t})\r\n// \t\t\t}).catch(error=>{\r\n// \r\n// \t\t\t})\r\n\t\t\t\r\n\t\t\t//这里是截止的地方\r\n\t\t\t})}\r\n\t\t\t},\r\n\t\t\tcreated(){\r\n\t\t\t\tlet photo={};\r\n\t\t\t\tphoto.id=this.$route.params[\"photoid\"];\r\n\t\t\t\tgetPhotoById(JSON.stringify(photo)).then(res=>{\r\n\t\t\t\t\tthis.photo=res.data.data;\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"src/components/Photo"}]}