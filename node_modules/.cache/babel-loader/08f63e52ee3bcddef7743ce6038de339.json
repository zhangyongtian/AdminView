{"remainingRequest":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\thread-loader\\dist\\cjs.js!D:\\biyesheji\\AdminView\\adminvue\\node_modules\\babel-loader\\lib\\index.js!D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\biyesheji\\AdminView\\adminvue\\src\\components\\Photo\\updatePhoto.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\biyesheji\\AdminView\\adminvue\\src\\components\\Photo\\updatePhoto.vue","mtime":1608195820106},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\biyesheji\\AdminView\\adminvue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHNhdmVwaG90byB9IGZyb20gIkAvdXRpbC9yZXF1ZXN0bmV0d29yay9hZG1pbnJlcXVlc3QiOwppbXBvcnQgeyBvc3NmaWxldXBsb2FkIH0gZnJvbSAiQC91dGlsL3JlcXVlc3RuZXR3b3JrL09zc0ZpbGVVcGxvYWQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImZpbGV1cGxvYWQiLAogIG1ldGhvZHM6IHsKICAgIHN1Y2Nlc3NVcGxvYWQ6IGZ1bmN0aW9uIHN1Y2Nlc3NVcGxvYWQocmVzLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmZpbGVMaXN0LnBvcCgpOwogICAgICB0aGlzLmZpbGVMaXN0LnB1c2goewogICAgICAgIG5hbWU6IGZpbGUubmFtZSwKICAgICAgICB1cmw6IHRoaXMuZGF0YU9iai5ob3N0ICsgJy8nICsgdGhpcy5kYXRhT2JqLmtleS5yZXBsYWNlKCIke2ZpbGVuYW1lfSIsIGZpbGUubmFtZSkKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKCLmnIDlkI7nmoTmlofku7blnLDlnYDmmK8iICsgdGhpcy5maWxlTGlzdFswXS51cmwpOwogICAgICB0aGlzLmltZ3MucHVzaCh0aGlzLmZpbGVMaXN0WzBdLnVybCk7IC8v6L+Z6YeM5bCx5piv5Zu+54mH5LiK5Lyg5oiQ5Yqf5LqGCgogICAgICB2YXIgcGhvdG8gPSB7fTsKICAgICAgcGhvdG8ucGhvdG9zdXJsID0gdGhpcy5maWxlTGlzdFswXS51cmw7CiAgICAgIHNhdmVwaG90byhKU09OLnN0cmluZ2lmeShwaG90bykpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCLkv53lrZjlm77niYfmnInplJnor68iKTsKICAgICAgfSk7CiAgICB9LAogICAgZXJyb3J1cGxvYWQ6IGZ1bmN0aW9uIGVycm9ydXBsb2FkKGVycm9yKSB7fSwKICAgIGZpbGVjaGFuZ2U6IGZ1bmN0aW9uIGZpbGVjaGFuZ2UoZmlsZSwgZmlsZWxpc3QpIHt9LAogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIF9zZWxmID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgb3NzZmlsZXVwbG9hZCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygi57Sr57qi6Imy5ZOl5pivIik7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgIF9zZWxmLmRhdGFPYmoucG9saWN5ID0gcmVzcG9uc2UuZGF0YS5wb2xpY3k7CiAgICAgICAgICBfc2VsZi5kYXRhT2JqLnNpZ25hdHVyZSA9IHJlc3BvbnNlLmRhdGEuc2lnbmF0dXJlOwogICAgICAgICAgX3NlbGYuZGF0YU9iai5vc3NhY2Nlc3NLZXlJZCA9IHJlc3BvbnNlLmRhdGEuYWNjZXNzaWQ7CiAgICAgICAgICBfc2VsZi5kYXRhT2JqLmtleSA9IHJlc3BvbnNlLmRhdGEuZGlyICsgX3RoaXMuZ2V0VVVJRCgpICsgJ18ke2ZpbGVuYW1lfSc7CiAgICAgICAgICBfc2VsZi5kYXRhT2JqLmRpciA9IHJlc3BvbnNlLmRhdGEuZGlyOwogICAgICAgICAgX3NlbGYuZGF0YU9iai5ob3N0ID0gcmVzcG9uc2UuZGF0YS5ob3N0OwogICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFVVSUQ6IGZ1bmN0aW9uIGdldFVVSUQoKSB7CiAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIChjID09PSAneCcgPyBNYXRoLnJhbmRvbSgpICogMTYgfCAwIDogJ3ImMHgzJyB8ICcweDgnKS50b1N0cmluZygxNik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGltZ3M6IFtdLAogICAgICBkYXRhT2JqOiB7CiAgICAgICAgcG9saWN5OiAnJywKICAgICAgICBzaWduYXR1cmU6ICcnLAogICAgICAgIGtleTogJycsCiAgICAgICAgb3NzYWNjZXNzS2V5SWQ6ICcnLAogICAgICAgIGRpcjogJycsCiAgICAgICAgaG9zdDogJycgLy8gY2FsbGJhY2s6JycsCgogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbGVMaXN0OiBmdW5jdGlvbiBmaWxlTGlzdCgpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogIH0KfTs="},{"version":3,"sources":["updatePhoto.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"photo_upload\">\r\n\t\t<el-card class=\"box-card\">\r\n\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n\t\t\t<el-breadcrumb-item :to=\"{ path: '/admin/photoupload' }\">超级管理员界面</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>照片墙上传</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t<el-upload\r\n\t\tclass=\"upload-demo\"\r\n\t\tdrag\r\n\t\taction=\"https://huabei5zhanh.oss-cn-huhehaote.aliyuncs.com\"\r\n\t\t:data=\"dataObj\"\r\n\t\t:multiple=\"false\"\r\n\t\t:on-success=\"successUpload\"\r\n\t\t:before-upload=\"beforeUpload\"\r\n\t\t:on-error=\"errorupload\"\r\n\t\t:on-change=\"filechange\"\r\n\t\t:file-list=\"fileList\">\r\n\t\t<i class=\"el-icon-upload\"></i>\r\n\t\t<div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n\t\t<div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n\t</el-upload>\r\n\t<div style=\"display: flex;\">\r\n\t\t<template v-for=\"img in imgs\">\r\n\t\t\t<el-image :src=\"img\">\r\n\t\t\t<div slot=\"placeholder\" class=\"image-slot\">\r\n\t\t\t\t加载中<span class=\"dot\">...</span>\r\n\t\t\t</div>\r\n\t\t\t</el-image>\r\n\t\t</template>\r\n\t\t\r\n\t</div>\r\n\t<div v-show=\"imgs.length>0\">\r\n\t\t上传成功的图片\r\n\t</div>\r\n\t</div>\r\n\t</el-card>\r\n\t</div>\n</template>\n\n<script>\r\n\timport {savephoto} from \"@/util/requestnetwork/adminrequest\"\r\n\timport {ossfileupload} from \"@/util/requestnetwork/OssFileUpload\"\r\n\t\r\n\t export default{\r\n\t\t name:\"fileupload\",\r\n\t\t methods: {\r\n\t\t \tsuccessUpload(res, file, fileList) {\r\n\t\t\t\tthis.fileList.pop();\r\n\t\t\t\tthis.fileList.push({name: file.name, url: this.dataObj.host + '/' + this.dataObj.key.replace(\"${filename}\",file.name) });\r\n\t\t\t\tconsole.log(\"最后的文件地址是\"+this.fileList[0].url)\r\n\t\t \t\tthis.imgs.push(this.fileList[0].url);\r\n\t\t\t\t//这里就是图片上传成功了\r\n\t\t\t\tlet photo={};\r\n\t\t\t\tphoto.photosurl=this.fileList[0].url;\r\n\t\t\t\tsavephoto(JSON.stringify(photo)).then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(\"保存图片有错误\")\r\n\t\t\t\t})\r\n\t\t \t},\r\n\t\t\terrorupload(error){\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tfilechange(file,filelist){\r\n\t\t\t},\r\n\t\t\tbeforeUpload(file) {\r\n\t\t\t  let _self = this;\r\n\t\t\t  return new Promise((resolve,reject)=>{\r\n\t\t\t\t  ossfileupload().then(response=>{\r\n\t\t\t\t  \t\t\t  console.log(\"紫红色哥是\")\r\n\t\t\t\t  \t\t\t  console.log(response.data)\r\n\t\t\t\t  \t\t\t  _self.dataObj.policy = response.data.policy;\r\n\t\t\t\t  \t\t\t  _self.dataObj.signature = response.data.signature;\r\n\t\t\t\t  \t\t\t  _self.dataObj.ossaccessKeyId = response.data.accessid;\r\n\t\t\t\t  \t\t\t  _self.dataObj.key = response.data.dir +this.getUUID()+'_${filename}';\r\n\t\t\t\t  \t\t\t  _self.dataObj.dir = response.data.dir;\r\n\t\t\t\t  \t\t\t  _self.dataObj.host = response.data.host;\r\n\t\t\t\t\t\tresolve(true)\r\n\t\t\t\t  }).catch(error=>{\r\n\t\t\t\t  \t\treject(false)\t  \r\n\t\t\t\t  })\r\n\t\t\t  })\r\n\t\t\t  \r\n\t\t\t},\r\n\t\t\tgetUUID () {\r\n\t\t\t  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n\t\t\t    return (c === 'x' ? (Math.random() * 16 | 0) : ('r&0x3' | '0x8')).toString(16)\r\n\t\t\t  })\r\n\t\t\t}\r\n\t\t },\r\n\t\t data() {\r\n\t\t \treturn {\r\n\t\t\t\timgs:[],\r\n\t\t\t\tdataObj: {\r\n\t\t\t\t  policy: '',\r\n\t\t\t\t  signature: '',\r\n\t\t\t\t  key: '',\r\n\t\t\t\t  ossaccessKeyId: '',\r\n\t\t\t\t  dir: '',\r\n\t\t\t\t  host: '',\r\n\t\t\t\t  // callback:'',\r\n\t\t\t\t}\r\n\t\t \t}\r\n\t\t },\r\n\t\t computed:{\r\n\t\t \tfileList() {\r\n\t\t \t  return []\r\n\t\t \t}\r\n\t\t }\r\n\t }\n</script>\n\n<style lang=\"less\">\r\n\t.photo_upload{\r\n\t\t\r\n\t}\n</style>\n"],"sourceRoot":"src/components/Photo"}]}